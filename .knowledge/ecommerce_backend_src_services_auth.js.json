{"is_source_file": true, "format": "JavaScript", "description": "This file defines authentication-related services such as user registration, login, token refresh, and password reset in a Node.js backend. It includes schema validation, interaction with the User model, and JWT handling.", "external_files": ["../models/User", "../utils/passwords", "../utils/jwt"], "external_methods": ["User.findOne", "User.create", "User.findById", "user.save", "hashPassword", "verifyPassword", "jwtUtil.signAccessToken", "jwtUtil.signRefreshToken", "jwtUtil.verifyRefreshToken"], "published": ["register", "login", "refresh", "forgotPassword", "resetPassword"], "classes": [], "methods": [{"name": "register(payload)", "description": "Registers a new user after validating input, checks for existing email, hashes the password, creates the user, and returns user info with JWT tokens.", "scope": "", "scopeKind": ""}, {"name": "login(payload)", "description": "Authenticates a user with email and password, verifies credentials, checks if the account is active, and returns user info with new JWT tokens.", "scope": "", "scopeKind": ""}, {"name": "refresh(refreshToken)", "description": "Verifies a refresh token, ensures the user exists and token validity, then issues new access and refresh tokens.", "scope": "", "scopeKind": ""}, {"name": "forgotPassword(email)", "description": "Generates a password reset token for a user, updates user record, and prepares for notification delivery.", "scope": "", "scopeKind": ""}, {"name": "resetPassword({ token, password })", "description": "Resets user's password after verifying the reset token, updates the password hash, invalidates old refresh tokens, and saves the user.", "scope": "", "scopeKind": ""}], "calls": ["User.findOne", "User.create", "User.findById", "user.save", "hashPassword", "verifyPassword", "jwtUtil.signAccessToken", "jwtUtil.signRefreshToken", "jwtUtil.verifyRefreshToken"], "search-terms": ["auth services", "JWT token management", "user registration", "password reset", "login verification"], "state": 2, "file_id": 32, "knowledge_revision": 74, "git_revision": "", "ctags": [{"_type": "tag", "name": "Joi", "path": "/home/kavia/workspace/code-generation/modern-e-commerce-platform-220291-220289/ecommerce_backend/src/services/auth.js", "pattern": "/^const Joi = require('joi');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "User", "path": "/home/kavia/workspace/code-generation/modern-e-commerce-platform-220291-220289/ecommerce_backend/src/services/auth.js", "pattern": "/^const User = require('..\\/models\\/User');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "forgotPassword", "path": "/home/kavia/workspace/code-generation/modern-e-commerce-platform-220291-220289/ecommerce_backend/src/services/auth.js", "pattern": "/^async function forgotPassword(email) {$/", "language": "JavaScript", "kind": "function", "signature": "(email)"}, {"_type": "tag", "name": "jwtUtil", "path": "/home/kavia/workspace/code-generation/modern-e-commerce-platform-220291-220289/ecommerce_backend/src/services/auth.js", "pattern": "/^const jwtUtil = require('..\\/utils\\/jwt');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/modern-e-commerce-platform-220291-220289/ecommerce_backend/src/services/auth.js", "pattern": "/^async function login(payload) {$/", "language": "JavaScript", "kind": "function", "signature": "(payload)"}, {"_type": "tag", "name": "loginSchema", "path": "/home/kavia/workspace/code-generation/modern-e-commerce-platform-220291-220289/ecommerce_backend/src/services/auth.js", "pattern": "/^const loginSchema = Joi.object({$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "refresh", "path": "/home/kavia/workspace/code-generation/modern-e-commerce-platform-220291-220289/ecommerce_backend/src/services/auth.js", "pattern": "/^async function refresh(refreshToken) {$/", "language": "JavaScript", "kind": "function", "signature": "(refreshToken)"}, {"_type": "tag", "name": "register", "path": "/home/kavia/workspace/code-generation/modern-e-commerce-platform-220291-220289/ecommerce_backend/src/services/auth.js", "pattern": "/^  register,$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "register", "path": "/home/kavia/workspace/code-generation/modern-e-commerce-platform-220291-220289/ecommerce_backend/src/services/auth.js", "pattern": "/^async function register(payload) {$/", "language": "JavaScript", "kind": "function", "signature": "(payload)"}, {"_type": "tag", "name": "registerSchema", "path": "/home/kavia/workspace/code-generation/modern-e-commerce-platform-220291-220289/ecommerce_backend/src/services/auth.js", "pattern": "/^const registerSchema = Joi.object({$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "resetPassword", "path": "/home/kavia/workspace/code-generation/modern-e-commerce-platform-220291-220289/ecommerce_backend/src/services/auth.js", "pattern": "/^async function resetPassword({ token, password }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ token, password })"}], "hash": "1bedf8f4f369a97ff91293947e82185c", "format-version": 4, "code-base-name": "ecommerce_backend", "filename": "ecommerce_backend/src/services/auth.js", "fields": [{"name": "register,", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"74": ""}]}